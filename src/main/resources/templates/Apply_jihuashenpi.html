<!DOCTYPE html>
<HTML xmlns:th="http://www.thymeleaf.org"><HEAD><TITLE>计划部长审批合同申请</TITLE>

  <link rel="stylesheet" type="text/css" href="jquery-easyui-1.8.5/themes/default/easyui.css">
  <link rel="stylesheet" type="text/css" href="jquery-easyui-1.8.5/themes/icon.css">
  <script type="text/javascript" src="jquery-easyui-1.8.5/jquery.min.js"></script>
  <script type="text/javascript" src="jquery-easyui-1.8.5/jquery.easyui.min.js"></script>
  <script type="text/javascript" src="jquery-easyui-1.8.5/locale/easyui-lang-zh_CN.js"></script>

<SCRIPT language=JAVASCRIPT> 
function chck()
{  var  count=0;
   for (var i=0;i<form.length;i++)
   if ((form[i].type == "radio") && (form[i].checked))
   count++; 
   if (count==0)
      { return false;  }
   else
      { return true;   }
}
 
function Add(SourceList,TargetList)
	{
	var nIndex = SourceList.selectedIndex;
 	var nCount = 0;  
	if (nIndex == -1)
	{
		// Process continue only if at least one item selected
		//alert("请先选择一项!");
		return;
	}
	for (i=0;i<SourceList.length;i++)
  {
     if (SourceList.options(i).selected==true)
     {    
         if (inSouceList(SourceList.options(i).value,TargetList)==false)
         {
          	var objSelected = new Option(SourceList[i].text, SourceList[i].value);
           	TargetList.options[TargetList.length] = objSelected;
         }
     }     
	}
  for (var i=0;i<TargetList.options.length;i++)
  {
    TargetList.options(i).selected=true;
  }
	if(navigator.appName=="Netscape")
	{
		history.go(0)
	}
 }
 function inSouceList(SourceListOption,TargetList)
 {
 	  for (i=0;i<TargetList.length;i++)
    {
	     if (TargetList.options[i].value==SourceListOption)
       {
        	 return true;
       }
    }   
    return false;
 }  
function Remove(SelectList)
	{
	var nIndex = SelectList.selectedIndex;
 	var nCount = 0;
	if (nIndex == -1)
	{
		// Process continue only if at least one item selected
		//alert("请先选择一项!");
		return;
	}
  while(nCount<SelectList.length)
  {
       if (SelectList.options(nCount).selected==true)
       {
       	 SelectList.options[nCount] = null;
       }
       else
       {
         nCount++;
       }
  }
	if(navigator.appName=="Netscape")
		{
		history.go(0)
		}	
	}
 function enter()
 {
   var srcEle = window.event.srcElement;
   var tmp;   
   tmp = window.showModalDialog("pub_pub.Dialog_Date?vc_input=" + srcEle.value);
     if ( tmp.indexOf("/") != -1)
     {
        srcEle.value = tmp;
     }
     return;
 }   
 function check_num()
 {
 	 if (window.event.keyCode > 57 || window.event.keyCode < 48)
	 {
	 		window.event.returnValue = false;
	 }
 }
 function check_blank()
 {
 	 if (window.event.keyCode < 48)
	 {
	 		window.event.returnValue = false;
	 }
 }
  
function check_num_dot()
{
 	 if (window.event.keyCode > 57 || window.event.keyCode < 46)
	 {
  		 window.event.returnValue = false;   
	 }
   else
   {
      if(window.event.keyCode==47)
      {
    		 window.event.returnValue = false;
      }
      if(window.event.keyCode==46)
      {
         if (window.event.srcElement.value.indexOf(".")!=-1)
         {
        		 window.event.returnValue = false;
         }
      }   
    }  
 }
  
 function submitonce(theform)
 {
 if (document.all || document.getElementById)
 {
 for (i=0;i<theform.length;i++)
 {
 var tempobj = theform.elements[i]
 if (tempobj.type.toLowerCase() =="button")
 tempobj.disabled = true
 }
 }
 }
 
  function CheckAll() 
 {
   var i = 0;
   for (i=0; i < window.document.forms[0].elements.length; i++) 
   {
     if(window.document.forms[0].elements[i].Chk<3) 
     {
       if(window.document.forms[0].elements[i].value=="")
       {
         alert(window.document.forms[0].elements[i].alt);
         window.document.forms[0].elements[i].focus();
         return;
       }
       else if (window.document.forms[0].elements[i].Chk==2)
       {
         if (NotNumber(window.document.forms[0].elements[i].value))
         {
            alert("提示信息：\n不是有效的数字，请重新输入。");
            window.document.forms[0].elements[i].focus();
            return;
         }
       }
     }
     else if(window.document.forms[0].elements[i].Chk==3)
     {
       if(window.document.forms[0].elements[i].value!="")
       {
         if (NotNumber(window.document.forms[0].elements[i].value))
         {
            alert("提示信息：\n不是有效的数字，请重新输入。");
            window.document.forms[0].elements[i].focus();
            return;
         }
       }
     }
   }
   window.document.forms[0].submit();
   return true;
 }
 function NotNumber(Field)
 {
   var j = 0;
   var k = 0;
   for (var i=0; i<Field.length; i++)
   {
      var ch=Field.substring(i,i+1);
      if((ch>="0")&&(ch<="9")) 
      {
        j=0;
      }
      else if(ch==".") 
      {
        k++;
      }
      else
      {
        j=1;
        break;
      }
   }
   if ((j==0)&&(k<2))
   {
      return false;
   }
   else
   {
      return true;
   }
 }
 function openwindown(page)
 {
    window.open(page,"newuser","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=700,height=400,left=100,top=150");
 }
</SCRIPT>

<SCRIPT language=JAVASCRIPT> 
function chck()
{  var  count=0;
   for (var i=0;i<form.length;i++)
   if ((form[i].type == "radio") && (form[i].checked))
   count++; 
   if (count==0)
      { return false;  }
   else
      { return true;   }
}
 
function Add(SourceList,TargetList)
	{
	var nIndex = SourceList.selectedIndex;
 	var nCount = 0;  
	if (nIndex == -1)
	{
		// Process continue only if at least one item selected
		//alert("请先选择一项!");
		return;
	}
	for (i=0;i<SourceList.length;i++)
  {
     if (SourceList.options(i).selected==true)
     {    
         if (inSouceList(SourceList.options(i).value,TargetList)==false)
         {
          	var objSelected = new Option(SourceList[i].text, SourceList[i].value);
           	TargetList.options[TargetList.length] = objSelected;
         }
     }     
	}
  for (var i=0;i<TargetList.options.length;i++)
  {
    TargetList.options(i).selected=true;
  }
	if(navigator.appName=="Netscape")
	{
		history.go(0)
	}
 }
 function inSouceList(SourceListOption,TargetList)
 {
 	  for (i=0;i<TargetList.length;i++)
    {
	     if (TargetList.options[i].value==SourceListOption)
       {
        	 return true;
       }
    }   
    return false;
 }  
function Remove(SelectList)
	{
	var nIndex = SelectList.selectedIndex;
 	var nCount = 0;
	if (nIndex == -1)
	{
		// Process continue only if at least one item selected
		//alert("请先选择一项!");
		return;
	}
  while(nCount<SelectList.length)
  {
       if (SelectList.options(nCount).selected==true)
       {
       	 SelectList.options[nCount] = null;
       }
       else
       {
         nCount++;
       }
  }
	if(navigator.appName=="Netscape")
		{
		history.go(0)
		}	
	}
 function enter()
 {
   var srcEle = window.event.srcElement;
   var tmp;   
   tmp = window.showModalDialog("pub_pub.Dialog_Date?vc_input=" + srcEle.value);
     if ( tmp.indexOf("/") != -1)
     {
        srcEle.value = tmp;
     }
     return;
 }   
 function check_num()
 {
 	 if (window.event.keyCode > 57 || window.event.keyCode < 48)
	 {
	 		window.event.returnValue = false;
	 }
 }
 function check_blank()
 {
 	 if (window.event.keyCode < 48)
	 {
	 		window.event.returnValue = false;
	 }
 }
  
function check_num_dot()
{
 	 if (window.event.keyCode > 57 || window.event.keyCode < 46)
	 {
  		 window.event.returnValue = false;   
	 }
   else
   {
      if(window.event.keyCode==47)
      {
    		 window.event.returnValue = false;
      }
      if(window.event.keyCode==46)
      {
         if (window.event.srcElement.value.indexOf(".")!=-1)
         {
        		 window.event.returnValue = false;
         }
      }   
    }  
 }
  
 function submitonce(theform)
 {
 if (document.all || document.getElementById)
 {
 for (i=0;i<theform.length;i++)
 {
 var tempobj = theform.elements[i]
 if (tempobj.type.toLowerCase() =="button")
 tempobj.disabled = true
 }
 }
 }
 
  function CheckAll() 
 {
   var i = 0;
   for (i=0; i < window.document.forms[0].elements.length; i++) 
   {
     if(window.document.forms[0].elements[i].Chk<3) 
     {
       if(window.document.forms[0].elements[i].value=="")
       {
         alert(window.document.forms[0].elements[i].alt);
         window.document.forms[0].elements[i].focus();
         return;
       }
       else if (window.document.forms[0].elements[i].Chk==2)
       {
         if (NotNumber(window.document.forms[0].elements[i].value))
         {
            alert("提示信息：\n不是有效的数字，请重新输入。");
            window.document.forms[0].elements[i].focus();
            return;
         }
       }
     }
     else if(window.document.forms[0].elements[i].Chk==3)
     {
       if(window.document.forms[0].elements[i].value!="")
       {
         if (NotNumber(window.document.forms[0].elements[i].value))
         {
            alert("提示信息：\n不是有效的数字，请重新输入。");
            window.document.forms[0].elements[i].focus();
            return;
         }
       }
     }
   }
   window.document.forms[0].submit();
   return true;
 }
 function NotNumber(Field)
 {
   var j = 0;
   var k = 0;
   for (var i=0; i<Field.length; i++)
   {
      var ch=Field.substring(i,i+1);
      if((ch>="0")&&(ch<="9")) 
      {
        j=0;
      }
      else if(ch==".") 
      {
        k++;
      }
      else
      {
        j=1;
        break;
      }
   }
   if ((j==0)&&(k<2))
   {
      return false;
   }
   else
   {
      return true;
   }
 }
 function openwindown(page)
 {
    window.open(page,"newuser","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=700,height=400,left=100,top=150");
 }

 function queding()
{
if(	confirm('您确认信息正确并通过吗？')){
    var $contform = $("#contform").serialize();
    $.ajax({
      url:'toApplyForTheContractYes',
      type:'post',
      data:$contform,
      success:function(rdata){
        if(rdata=="1"){
          alert("审核通过！");
          location.href="contractmanager/Apply_daishenjihua.html";
        }else{
          alert("审核失败！")
        }
      }
    })


	window.document.location = "Apply_daishenjihua.htm";
}
}
</SCRIPT>

<META http-equiv=Content-Language content=zh-cn>
<META http-equiv=Content-Type content="text/html; charset=UTF-8">
<META content="MSHTML 6.00.2900.5626" name=GENERATOR>
<META content=FrontPage.Editor.Document name=ProgId><LINK
          href="../public/contractmanager/js/style.css" rel=stylesheet></HEAD>
<BODY>
<CENTER>
<CENTER>
<TABLE style="LINE-HEIGHT: 30px" cellSpacing=1 cellPadding=0 width="100%" 
bgColor=#9ea7bd borderColorLight=#9ea7bd border="1px">
  <TBODY>
  <TR>
    <TD>
      <TABLE cellSpacing=1 cellPadding=3 width="100%" border="1px">
        <TBODY>
        <TR bgColor=#ffffff>
          <TD align=middle width="100%" bgColor=#ffffff colSpan=20 
            height=22><B>
            <H2><FONT color=#0070c0>合同申请审批</B><IMG alt=帮助 src="../public/contractmanager/img/help_a.gif" border=0></A> </FONT></H2></TD></TR>
        <TR class=t1>
          <TD width="20%">询价书名称：</TD>
          <TD class=t2 width="30%" th:text="${enquireByIdDetail.getEnquireName()}"></TD><!--<td>合同编号：</td>
  <td colspan=2>W20100040</td>-->
          <TD width="20%">报价份数：</TD>
          <TD class=t2 width="30%">1</TD></TR>
        <TR class=t1>
          <TD width="20%" th:text="${byIdContractApply.getTopQuote()}">最高报价（元）：</TD>
          <TD class=t2 width="30%">5001</TD>
          <TD width="20%" th:text="${byIdContractApply.getTopQuote()}">最低报价（元）：</TD>
          <TD class=t2 
width="30%">5001</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<TABLE style="LINE-HEIGHT: 30px" cellSpacing=1 cellPadding=0 width="100%" 
bgColor=#9ea7bd borderColorLight=#9ea7bd border="1px">
  <TBODY>
  <TR>
    <TD>
      <TABLE cellSpacing=1 cellPadding=3 width="100%" border="1px">
        <TBODY>
        <TR class=t1>
          <TD align=middle>供应商名称</TD>
          <TD align=middle>报价时间</TD>
          <TD align=middle>报价总金额（元）</TD>
          <TD align=middle>报价打分</TD>
          <TD align=middle>综合评分</TD></TR>
        <TR class=t2>
          <TD th:text="${bySupplierid.getCompany()}"></TD>
          <TD>2010/01/08 17:07:30<BR></TD>
          <TD th:text="${byIdContractApply.getAllSumPrice()}">5001<BR></TD>
          <TD><BR></TD>
          <TD><BR></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<TABLE style="LINE-HEIGHT: 30px" cellSpacing=1 cellPadding=0 width="100%" 
bgColor=#9ea7bd borderColorLight=#9ea7bd border="1px">
  <TBODY>
  <TR>
    <TD>
      <TABLE cellSpacing=1 cellPadding=3 width="100%" border="1px">
        <TBODY>
        <TR class=T1>
          <TD noWrap align=middle colSpan=9>物资<B><FONT color=red>1 [[${enquireByIdDetail.getEnquireDetail().getMaterialName()}]]
            &nbsp;</B></FONT><A 
            href="javascript:alert('对应需求计划书详细')"></A> [[${enquireByIdDetail.getEnquireDetail().getAmount()}]]个
            <B>计划价（元/含税）</B><A 
            href="javascript:alert('对应报价书详细')"> 
            报价明细信息</A></TD></TR>
        <TR class=t1>
          <TD noWrap align=middle width="20%">供应商</TD>
          <TD noWrap align=middle>数量</TD>
          <TD noWrap align=middle>单价<BR>（元/含税）</TD>
          <TD noWrap align=middle>运杂费<BR>（元）</TD>
          <TD noWrap align=middle>其它费用<BR>（元）</TD>
          <TD noWrap align=middle>总计<BR>（元）</TD>
          <TD noWrap align=middle width="12%">计划开始<BR>交货期</TD>
          <TD noWrap align=middle>开始<BR>交货期</TD>
          <TD noWrap align=middle>结束<BR>交货期</TD></TR>
        <TR class=t2>
          <TD width="20%" th:text="${bySupplierid.getCompany()}"><A
            href="javascript:alert('对应供应商详细')"><FONT 
            color=green >Best</FONT></A><BR></TD>
          <TD align=right th:text="${queryObjetQuoteAndQuoteDetail.getQuoteDetail().getAmount()}">999<BR></TD>
          <TD align=right th:text="${queryObjetQuoteAndQuoteDetail.getQuoteDetail().getUnitPrice()}">5<BR></TD>
          <TD align=right th:text="${queryObjetQuoteAndQuoteDetail.getQuoteDetail().getMixPrice()}">5<BR></TD>
          <TD align=right th:text="${queryObjetQuoteAndQuoteDetail.getQuoteDetail().getOtherPrice()}">1<BR></TD>
          <TD align=right th:text="${queryObjetQuoteAndQuoteDetail.getQuoteDetail().getTotalPrice()}">5001<BR></TD>
          <TD align=right>2010/01/08</TD>
          <TD align=middle th:text="${#dates.format(queryObjetQuoteAndQuoteDetail.getQuoteDetail().getStartDate(),'yyyy-MM-dd')}">2010/01/08<BR></TD>
          <TD align=middle th:text="${#dates.format(queryObjetQuoteAndQuoteDetail.getQuoteDetail().getEndDate(),'yyyy-MM-dd')}">2010/01/08<BR></TD></TR>
        <TR class=t1>
          <TD noWrap align=middle><B>需求计划数量<B></B></B></TD>
          <TD align=right colSpan=4>[[${enquireByIdDetail.getEnquireDetail().getAmount()}]]<BR></TD>
          <TD noWrap align=middle><B>订货数量<B></B></B></TD>
          <TD align=right colSpan=4>[[${enquireByIdDetail.getEnquireDetail().getAmount()}]]<BR></TD></TR>
        <TR class=t1>
          <TD align=middle>总金额（元）</TD>
          <TD colSpan=8 th:text="${byIdContractApply.getAllSumPrice()}">5001<BR></TD></TR>
        <TR class=t1>
          <TD align=middle >合同申请备注</TD>
          <TD th:text="${byIdContractApply.getRemark()}"
colSpan=8>afrawdasdasd<BR></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<TABLE style="LINE-HEIGHT: 30px" cellSpacing=1 cellPadding=0 width="100%" 
bgColor=#9ea7bd borderColorLight=#9ea7bd border="1px">
  <TBODY>
  <TR>
    <TD>
      <TABLE cellSpacing=1 cellPadding=3 width="100%" border="1px">
        <TBODY>
        <TR class=t1>
          <TD width="20%">财务部长是否同意</TD>
          <TD class=t2>同意</TD></TR>
        <TR class=t1>
          <TD width="20%" rowSpan=2>财务部长审核意见</TD>
          <TD class=t2>好<BR></TD></TR>
        <TR class=t2>
          <TD align=right>审核人：张惠 审核时间2010/01/08 
      17:22:37<BR></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></CENTER><TD 
align="left"><FONT 
color=red>说明：系统中供应商名称用蓝色表示为合格供方，绿色表示为许可供方，红色表示为其他供方；数量为红色表示报价数量与询价数量不相等。</FONT></TD> 

<FORM id="contform">
<TABLE style="LINE-HEIGHT: 30px" cellSpacing=1 cellPadding=0 width="100%" 
bgColor=#9ea7bd borderColorLight=#9ea7bd border="1px">
  <TBODY>
  <TR>
    <TD>
      <TABLE cellSpacing=1 cellPadding=3 width="100%" border="1px">
        <TBODY>
        <TR class=t1>
          <TD width="20%">是否同意 <input type="hidden" name="id" th:value="${byIdContractApply.getId()}"/></TD>
          <TD><INPUT type=radio CHECKED value="S002-1" name="leadAgree">同意 <INPUT
            type=radio value="S002-0" name="leadAgree">驳回<INPUT
            type=radio value=0 name="leadAgree">待审<INPUT
            type=radio value=0 name="leadAgree">废弃</TD></TR>
        <TR class=t1>
          <TD width="20%">审批意见</TD>
          <TD><TEXTAREA name="leadOpinion" rows=3 cols=60>  </TEXTAREA>
      </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=1 cellPadding=0 width="100%" bgColor=#9ea7bd
borderColorLight=#9ea7bd border="1px">
  <TBODY>
  <TR>
    <TD>
      <TABLE cellSpacing=1 cellPadding=3 width="100%" border="1px">
        <TBODY>
        <TR>
          <TD align=right>审批人
            <input  type="hidden" name="leaderId" th:value="${session.user.getId()}"/>
            <INPUT  style="BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-BOTTOM-COLOR: black; BORDER-LEFT: 0px; WIDTH: 80px" readOnly maxLength=20 th:value="${session.user.getLoginId()}" name="leader">&nbsp; &nbsp;
            审批时间 <INPUT
            style="BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-BOTTOM-COLOR: black; BORDER-LEFT: 0px; WIDTH: 80px"
            readOnly maxLength=20 id="startDate" value=2010/01/08 name="leadDatev">
      </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><INPUT type=hidden 
value=10002010182564 name=p_Applyno> <INPUT type=hidden value=4 name=p_type> 
<BR><INPUT onclick="queding();" type=button value=确定> <INPUT onclick=history.back() type=button value=返回> 
</FORM></CENTER>
<script type="text/javascript">
  $(function (){
    //当前日期
    var now = new Date();
    var date = now.getFullYear()+"-"+(now.getMonth()+1)+"-"+now.getDate();
    $("#startDate").val(date);
  })

</script>
</BODY></HTML>
